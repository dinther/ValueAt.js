<!DOCTYPE html>
<html lang="en" class="nowhitespace">
	<head>
		<meta name="description" content="Beam editor for show lasers.">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>ValueAt.js</title>
        <link rel="stylesheet" href="index.css">
        <link rel="stylesheet" href="valueAtTimeline.css">
	</head>
	<body>
        <div id="timeline"></div>
        <br></bnr><button id="exportStepListBtn">Save stepper curve to steplist.bin file.</button>


        <script type="module">
            import * as ValueAt from "./valueat.js"
            import * as lookupAtExport from "./lookupAtToStepList.js";
            import * as Easings from "./easings.js";
            import {drawValueAtOnSVG, createValueAtUILine} from "./valueui.js";
            import {ValueAtTimeLine} from "./valueAtTimeline.js";

            document.querySelector('#exportStepListBtn').addEventListener('click', (e)=>{
                console.log(lookupAtExport.computeStepList(stepper, 20000, 'steplist.bin').toString());
            })

            var valueAt_x = new ValueAt.LookupAtTime('xpos');
            valueAt_x.addValueKey(10,-50);
            valueAt_x.addValueKey(30,100, Easings.easeOutBounce, 0.5);
            valueAt_x.addValueKey(75,60, Easings.easeInOutQuad);
            valueAt_x.addValueKey(100,0,Easings.easeOutCirc);
            valueAt_x.init(0.01);
             
            var valueAt_y = new ValueAt.LookupAtTime('ypos');
            valueAt_y.addValueKey(20,-50);
            valueAt_y.addValueKey(30,100, Easings.easeOutCirc, 0.5);
            valueAt_y.addValueKey(70,100);
            valueAt_y.addValueKey(90,0,Easings.easeInCirc);
            valueAt_y.init(0.01);

            var stepper = new ValueAt.LookupAtTime('stepper');
            stepper.addValueKey(8,500);
            stepper.addValueKey(13,1000, Easings.easeInOutElastic, 0.9);
            stepper.addValueKey(24, 0, Easings.easeOutElastic, 0.9);
            stepper.init(0.01);

            var timeline = new ValueAtTimeLine(document.querySelector('#timeline'), 0, 100)
            timeline.addValueAt(valueAt_x, 'Pos x',1);
            timeline.addValueAt(valueAt_y, 'Pos y', 1, 'yellow');
            timeline.addValueAt(stepper, 'Stepper', 1);

            window.stepper = stepper;
            window.computeStepList = lookupAtExport.computeStepList;
            window.typedArrayToFile = lookupAtExport.typedArrayToFile;
            window.valueAt_x = valueAt_x; 
            window.valueAtTimeline = timeline;
            
        </script>
    </body>
</html>

